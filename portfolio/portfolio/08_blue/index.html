<!DOCTYPE html>
<html lang="en-gb">
<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Clare&#39;s GIS Portfolio</title>
<meta name="description" content="GIS Portfolio">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://cgordon-gis.github.io/portfolio/css/bootstrap.min.css">
<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,300,700,400italic">
<link rel="stylesheet" href="https://cgordon-gis.github.io/portfolio/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cgordon-gis.github.io/portfolio/css/owl.carousel.css">
<link rel="stylesheet" href="https://cgordon-gis.github.io/portfolio/css/owl.theme.css">


  <link href="https://cgordon-gis.github.io/portfolio/css/style.sea.css" rel="stylesheet" id="theme-stylesheet">

 

  
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  


<link href="https://cgordon-gis.github.io/portfolio/css/custom.css" rel="stylesheet">
<link rel="shortcut icon" href="https://cgordon-gis.github.io/portfolio/img/favicon.png">


</head>
<body>
  <div id="all">
      <div class="container-fluid">
          <div class="row row-offcanvas row-offcanvas-left">
              <div id="sidebar" class="col-xs-6 col-sm-4 col-md-3 sidebar-offcanvas">
    <div class="sidebar-content">
	<header>
	    <h1 class="sidebar-heading"><a href="https://cgordon-gis.github.io/portfolio">Clare&#39;s GIS Portfolio</a></h1>
	</header>
	
	<p class="sidebar-p">I am a Lecturer in GIS in the School of Earth and Environment at the University of Leeds.</p>
	
	<p class="sidebar-p">This portfolio showcases my experiments in GIS inspired by #30DayMapChallenge on Twitter in November 2021 and 2022. I'm following it on Mastodon in 2023.</p>
	
	<p class="sidebar-p">Look under 'About' for more information about the challenge.</p>
	
	<nav>
	    <ul class="sidebar-menu">
		
		<li><a href="https://cgordon-gis.github.io/portfolio/portfolio/">Portfolio</a></li>
		
		<li><a href="https://cgordon-gis.github.io/portfolio/about/">About</a></li>
		
		<li><a href="https://cgordon-gis.github.io/portfolio/contact/">Get in touch</a></li>
		
	    </ul>
	    <p class="social">
  
  
  
  
  <a href="https://mastodon.social/@ClareEGordon" data-animate-hover="pulse" class="external mastodon" title="Mastodon" rel="me">
    <i class="fa fa-mastodon"></i>
  </a>
  
  
  
  <a href="mailto:c.e.gordon@leeds.ac.uk" data-animate-hover="pulse" class="email" title="E-mail">
    <i class="fa fa-envelope"></i>
  </a>
  
  
  <a href="https://www.linkedin.com/in/clare-gordon-979b5a74/" data-animate-hover="pulse" class="external" title="LinkedIn">
    <i class="fa fa-linkedin"></i>
  </a>
  
  
  
  <a href="https://github.com/cgordon-gis" data-animate-hover="pulse" class="external" title="GitHub">
    <i class="fa fa-github"></i>
  </a>
  
  
  
  
</p>

	</nav>

	<footer>
	    <div class="copyright">
		<p class="credit">
		    
		    &copy; 2024 Clare Gordon |
		    
		    Template by <a href="https://bootstrapious.com/free-templates" class="external">Bootstrapious.com</a>

&amp; ported to Hugo by <a href="https://github.com/kishaningithub">Kishan B</a>

		</p>
	    </div>
	</footer>
    </div>
</div>

              
<div class="col-xs-12 col-sm-8 col-md-9 content-column white-background">
  <div class="small-navbar visible-xs">
  <button type="button" data-toggle="offcanvas" class="btn btn-ghost pull-left"> <i class="fa fa-align-left"> </i>Menu</button>
  <h1 class="small-navbar-heading"><a href="https://cgordon-gis.github.io/portfolio">Clare&#39;s GIS Portfolio</a></h1>
</div>

  <div class="row">
    <div class="col-lg-8">
      <div class="content-column-content">
         <h1>Blue</h1>
         <p>Once I&rsquo;d discovered the UKHO site with lots of detailed bathymetry for the UK, it seemed obvious to produce a map of Loch Torridon.  In the end, it worked best to concentrate on one part of the Loch.</p>
<h2 id="bathymetry-of-the-loch-torridon-narrows">Bathymetry of the Loch Torridon Narrows</h2>
<p><img src="../../img/portfolio/TorridonBathymetry_sm.png" alt="Bathymetry of the Loch Torridon Narrows." title="Bathymetry of the Loch Torridon Narrows."></p>
<h3 id="data-i-used">Data I used</h3>
<ul>
<li>2m, 4m and 8m resolution bathymetry of Loch Torridon from <a href="https://seabed.admiralty.co.uk/order-type?x=-639089.81&amp;y=7880789.31&amp;z=10.68">UKHO Seabed Mapping Service</a></li>
<li><a href="https://osdatahub.os.uk/downloads/open/OpenZoomstack">Ordnance Survey OpenZoomstack data</a> with <a href="https://github.com/OrdnanceSurvey/OS-Open-Zoomstack-Stylesheets">OS stylesheets</a>.</li>
</ul>
<h3 id="tools-i-used">Tools I used</h3>
<ul>
<li>GDAL to convert .bag files to tif and combine different resolutions into one output.</li>
<li>QGIS to fill some of gaps in data (<code>r.fill.null</code>), e.g. fish farm to east of Shieldaig Peninsula.</li>
<li>QGIS to layout.</li>
</ul>
<h3 id="what-did-i-learn">What did I learn?</h3>
<ul>
<li>Where to find detailed bathymetry data for UK.</li>
<li>How to extract bathymetry data from <code>.bag</code> files.</li>
<li>How shallow the narrows themselves are, and how quickly they drop away into the outer loch.</li>
</ul>
<h3 id="what-do-i-want-to-do-next">What do I want to do next?</h3>
<ul>
<li>Data from 8m bathymetry doesn&rsquo;t look great with more detailed areas, but I haven&rsquo;t found a way round this yet.</li>
</ul>
<h3 id="process">Process</h3>
<h4 id="converting-bag-files">Converting bag files</h4>
<p>Files are provided as <code>.bag</code> - <strong>Bathymetry Attributed Grid</strong>.  If add straight to QGIS nothing shows.  There are two bands of data.</p>
<ul>
<li><a href="https://gdal.org/drivers/raster/bag.html">GDAL manual page for BAG</a></li>
</ul>
<p>Appear to need <code>libhdf5</code>.</p>
<p>BAG files have two image bands</p>
<ul>
<li>Band 1 = Elevation</li>
<li>Band 2 = Uncertainty</li>
</ul>
<p>Can select a single band as follows:</p>
<pre tabindex="0"><code>gdal_translate -b 1 input.tif output.tif
</code></pre><p>So to export the elevation band:</p>
<pre tabindex="0"><code>gdal_translate -b 1 -of GTiff input.bag output.tif
</code></pre><h4 id="combining-different-resolution-bathymetry-layers">Combining different resolution bathymetry layers</h4>
<p>Combined the bathymetry layers with GDAL. Used gdalbuildvrt.</p>
<pre tabindex="0"><code>gdalbuildvrt combined.vrt bathy8.tif bathy4.tif bathy2.tif -resolution highest
</code></pre><p>Then converted to <code>tif</code> format.</p>
<pre tabindex="0"><code>gdal_translate -of GTiff combined.vrt combined.tif
</code></pre><h4 id="filling-in-gaps">Filling in gaps</h4>
<p>For example, can I fill the bit near the fish farm to the east of Shieldaig Peninsula?</p>
<p>In QGIS:</p>
<ul>
<li><code>r.fill.null</code> seemed to work, but play with the settings.</li>
</ul>
<p>Defaults seemed fine.</p>
<h4 id="setting-up-output">Setting up output</h4>
<p>Loaded into QGIS.  Duplicated layer to add hillshade.</p>
<p>Used following layers from OS Open Zoomstack:</p>
<ul>
<li>surfacewater</li>
<li>waterlines</li>
<li>foreshore</li>
<li>names</li>
<li>contours</li>
<li>land</li>
</ul>
<p>and styled with OS qml style sheet.</p>

         
      </div>
    </div>
  </div>
</div>

          </div>
      </div>
  </div>
  <script src="https://cgordon-gis.github.io/portfolio/js/jquery.min.js"></script>
<script src="https://cgordon-gis.github.io/portfolio/js/bootstrap.min.js"></script>
<script src="https://cgordon-gis.github.io/portfolio/js/jquery.cookie.js"> </script>
<script src="https://cgordon-gis.github.io/portfolio/js/ekko-lightbox.js"></script>
<script src="https://cgordon-gis.github.io/portfolio/js/jquery.scrollTo.min.js"></script>
<script src="https://cgordon-gis.github.io/portfolio/js/masonry.pkgd.min.js"></script>
<script src="https://cgordon-gis.github.io/portfolio/js/imagesloaded.pkgd.min.js"></script>
<script src="https://cgordon-gis.github.io/portfolio/js/owl.carousel.min.js"></script>
<script src="https://cgordon-gis.github.io/portfolio/js/front.js"></script>



</body>
</html>
